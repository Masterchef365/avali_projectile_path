\documentclass[12pt]{article}
\usepackage[a4paper, margin=1in]{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{parskip}
\usepackage{graphicx}
\usepackage{hyperref}
\renewcommand{\thesubsubsection}{\thesubsection.\alph{subsubsection}}
%\AddToHook{cmd/section/before}{\clearpage} 

\begin{document}

\section*{Coordinate system}
The following assumes the player to be located at the origin. These coordinates are acquired by subtracting the player's position from the destination's position. The $y$ direction is up/down, $x$ is left/right.

\section*{Notation}
\begin{itemize}
    \item $x_f, y_f$: The final desired $x$ and $y$ position of the projectile.
    \item $t_f$: The total flight time.
    \item $g$: The (positive) gravitational acceleration in the negative $y$ direction.
    \item $x_0', y_0'$: The initial velocity of the projectile. Its magnitude is the desired speed, and the desired direction is its normalized value.
    \item $M$: The maximum desired height of the projectile above the player.
\end{itemize}

\section*{System}
The following equations summarize the trajectory of the projectile:
\[ y(t) = -gt^2 + y_0't \]
\[ x(t) = x_0't \]

\section*{Solution}
Because the y position of the projectile is a parabola with respect to time, it's vertex will be the maximum height of the projectile. For $ax^2 + bx + c$, the vertex sits at $x = \frac{-b}{2a}$. Therefore, we have:
\[ M = y \left( \frac{-y_0'}{-2g} \right) \]
\[ = -g\left( \frac{y_0'}{2g} \right)^2 + y_0'\left( \frac{y_0'}{2g} \right) \]
\[ = -g\left( \frac{y_0'^2}{4g^2} \right) + \frac{y_0'^2}{2g} \]
\[ = \frac{-y_0'^2}{4g} + \frac{2y_0'^2}{4g} \]
\[ = \frac{y_0'^2}{4g} \]

So we can solve for $y_0'$ given $M$ and $g$:
\[ M = \frac{y_0'^2}{4g} \]
\[ 4Mg = y_0'^2 \]
\[ y_0' = 2\sqrt{Mg} \]

Next we will solve for $t_f$ given $y_0'$ and $g$:
\[ y_f = y(t_f) = -gt_f^2 + y_0't_f \]
\[ 0 = -gt_f^2 + y_0't_f - y_f \]

We can use the quadratic equation to find the final time $t_f$. Note that there are two solutions; the largest, real solution will be the correct value of $t_f$ because it is the second time the $y$ value crosses the correct $y_f$ value (the first being its initial launch into the air!)
\[ t_f = \frac{-y_0'}{-2g} \pm \frac{\sqrt{ y_0'^2 - 4(-g)(-y_f) }}{-2g} \]
\[ = \frac{y_0'}{2g} \pm \frac{\sqrt{ y_0'^2 - 4gy_f }}{2g} \]

Finally, we can use $t_f$ and $x_f$ to find $x_0'$:
\[ x_f = x(t_f) = x_0't_f \]
\[ x_0' = \frac{x_f}{t_f} \]

%\section*{Summary}
%\[ y_0' = 2\sqrt{Mg} \]
%\[ t_f = \frac{y_0'}{2g} \pm \frac{\sqrt{ y_0'^2 + 4gy_f }}{2g} \]
%\[ x_0' = \frac{x_f}{t_f} \]

Demonstration:
\url{https://www.desmos.com/calculator/dxlkzxzynn}

\end{document}
